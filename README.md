#Read Me

This repository contains a solution to John Hopkins on Coursera's "Getting and Cleaning Data" course final project composed by the following files:

* README.md: just present the other files
* CodeBook.md: talks about the original data and variables of tidy data generated by "run_analysis.R"
* run_analysis.R: script that transforms the original dataset in the desired tidy dataset
* tidy_data_set.txt: tidy dataset produced by run_analysis.R script 

###Data Transformation

To satisfy the course project instructions I performed the following steps:

######Before coding...

1- I downloaded the original dataset from link provided by course project assignment<br />
2- I decompress the downloaded file in a directory (preserving directory structure of the original dataset)<br />
3- I inspected files to develop an understanding about its structure

After it I created a script "run_analysis.R" (as requested) in the same directory where downloaded dataset was previously decompressed.

######What my "run_analysis.R" script does

Note: between brackets I listed the line numbers of script where actions are coded

1- Loads two libraries: "plyr" and "dplyr" [lines 5 and 6]<br />
2- Creates two variables ("script_dir" and "datafiles_dir") that store the script and dataset directories (remember that the dataset directory is a direct subdirectory of script directory) [lines 9 and 10]<br />
3- Set working directory to "datafiles_dir" [line 12]<br />
4- Reads "features.txt" file and store its content into a vector named "features" [lines 15 and 16]<br />
5- Reads "activity_labels.txt" file. The data frame created has two columns named "activity_id" and "activity_name" [line 20]<br />
6- Creates a vector named "tidy_data_column_list". This vector will store positions of features names (stored into vector created in the step 4) that contain "mean()" and "std()" strings. It is initialized with three elements (1, 2 and 3) because data will be preceded by three columns (volunteer code named "subject", activity code named "activity_id" and activity name named "activity_name") [line 26]<br />
7- Interacts over features names vector (created by step 4) to populate "tidy_data_column_list" with positions of features names that contain "mean()" and "std()" strings [lines 32 to 40 between 33 and 35]<br />
8- Replaces characters "-", "(", "," and ")" of features names by "_" (producing more legible features names). This is not mandatory just cosmetic. [lines 32 to 40 between 37 and 39]<br />   
9- Changes working directory to datafiles_dir + "/train" to read training dataset [line 43]<br />
10- Reads "X_train.txt" file to a data frame named "X_train". The features vector (created in the step 4) names resulting data frame columns [line 46]<br />
11- Reads "subject_train.txt" file and creates a data frame named "subject_train" [line 48]<br />
12- Reads "y_train.txt" file and join resulting data frame with activities data frame (created in the step 5). The resulting data frame (y_train) has two columns (activity_id and activity_name) [line 51 and 52]<br />
13- Merges subject_train, y_train (already containing activity_name) and x_train data frames [lines 55 and 56]<br />
14- Executes steps 9 to 13 for test data set [line 59 to 72]<br />
15- Merges vertically training and test datasets. The resulting data frame (named "tidy_data") have 10299 rows (2947 rows provided by training dataset and 7352 provided by training dataset) and 564 columns (561 features preceded by subject_id, activity_id and activity_name columns) [line 75]<br />
16- Uses tidy_data_column_list to eliminate (by a simple subsetting operation) columns where feature name doesn't contain "mean()" and "std()" strings. Now the tidy_data data frame has 69 columns and 10299 rows [line 77]<br />
17- Creates a new data frame named "second_tidy_data". The dplyr "group by" and "summarise_each" functions are used to calculate average of each variable for each activity and each subject [lines 80 and 81]<br />
18- The "group by" function introduced a new column (named subject_activity) into second_tidy_data data frame that contains combinations of subject and activity_name columns. Furthermore mean calculation (previous step) damaged activity_name column (because it is a character variable). This step gives final shape to second_tidy_data fixing activity_name column and eliminating column introduced by "group by" function [line 85]<br />
19- Returns to script_dir setting it as working directory [line 87]<br />
20- Writes second_tidy_data to a text file as requested. So... the final result is generated in the script directory [line 90]<br />

To more details please refer the script source code. It is widely commented.